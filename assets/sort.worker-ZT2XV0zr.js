var p=Object.defineProperty;var m=(e,t,s)=>t in e?p(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s;var l=(e,t,s)=>m(e,typeof t!="symbol"?t+"":t,s);class h{constructor(){l(this,"items",new Map)}register(t,s){if(this.items.has(t))throw new Error(`${t} уже зарегистрирован'`);this.items.set(t,s)}getRegistered(t){const s=this.items.get(t);if(!s)throw new Error(`${t} не зарегистрирован`);return s}getAllRegistered(){return[...this.items.values()]}getFirstRegisteredItem(){return this.items.values().next().value}}function c(e){if(e.length<=1)return e;const t=Math.ceil((e.length-1)/2),s=e[t],o=[],n=[];for(let r=0;r<e.length;r++){const a=e[r];r!==t&&(a>s?n.push(a):o.push(a))}return[...c(o),s,...c(n)]}let i;function d(){return i||(i=new h,y((e,t)=>i.register(e,t))),i}function y(e){e("quick-sort",{type:"quick-sort",label:"Быстрая сортировка",sort:t=>c(t)})}const k=e=>({type:"task-complete",payload:e}),g=e=>({type:"task-error",payload:e}),w=e=>({type:"worker-terminated",payload:e});function M(e){return g(`Сортировка типа ${e} не зарегистрирована`)}function v(){return{type:"worker-stopped",payload:""}}const E=d();self.onmessage=e=>{const t=e.data.type;switch(t){case"execute":{const{array:s,algorithm:o}=e.data.payload,n=E.getRegistered(o);if(!n){self.postMessage(M(o));return}const r=performance.now(),a=n.sort(s),u=performance.now()-r,f={array:a,time:u};self.postMessage(k(f));break}case"cancel":self.postMessage(v());break;default:console.log(t),self.postMessage(w(void 0))}};self.onerror=e=>{self.postMessage(g(e.toString()))};
